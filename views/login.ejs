<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>로그인</title>

  <!-- bootstrap cdn -->
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

  <!-- axios CDN -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="/static/css/login.css">

  <style>
    form {
      width: 50%;
      height: 50%;
      border-radius: 10%;
      background-color: skyblue;
      display: flex;
      flex-direction: column;
      /* justify-content: center;
      align-items: center; */
    }

    form p {
      text-align: center;
      font-size: 20px;
      color: white;
    }
  </style>
</head>
<body>
  <!-- <form class="kakaoLogo">
    <img id="kakaoBtn" onclick="kakaoLogin()" src="/static/img/kakaoLoginLogo.png" alt="카카오로그인">
  </form> -->
  <form name="formLogin">
    <p>로그인</p>
    <div>
      <label for="userid">ID</label>
      <input id="userid" type="text" name="userid" required />
    </div>
    
    <div>
      <label for="password">Password</label>
      <input id="password" type="password" name="pw" required />
    </div>
    <button type="button" onclick="login();">Login</button>
  </form>

  <script>
 

    function login() {
        const formLogin = document.forms['formLogin'];

        if (!formLogin.checkValidity ()) {
          formLogin.reportValidity();
          return;
        }

        axios({
          method: 'POST',
          url: '/signin',
          data: {
            userid: formLogin.userid.value,
            pw: formLogin.pw.value,
          },
        })
          .then((res) => {
            return res.data;
          })
          .then((data) => {
            // data: true, false 
            if (data) {
              // true
              // (1) alert 띄우기
              alert('로그인 성공');
              document.location.href = '/';
              // (2) form_info 폼 선택
              // const formInfo = document.forms['form_info'];
              // (3) form_login의 userid 값을 form_ingo의 userid value에 저장
              // formInfo.userid.value = formLogin.userid.value;
              // (4) form_info 제출
              // form[name="form_info"] 요소의 method와 action 속성 값에 의해
              // POST /user/profile 요청을 수행
              // formInfo.submit();
            } else {
              // false
              // (1) alert 띄우기
              alert('로그인 실패');
              // (2) form_info 초기화 (제출 안함)
              formLogin.reset();
            }
          });
      }
  </script>

</body>

<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>


</html>